<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>AWSでKnowledgeを構築し情報投稿を集約</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="4619125b-03ce-46f8-9289-801a1f544662" class="page sans"><header><h1 class="page-title">AWSでKnowledgeを構築し情報投稿を集約</h1><p class="page-description"></p><table class="properties"><tbody><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>タグ</th><td></td></tr></tbody></table></header><div class="page-body"><figure id="636ed8a4-86b8-4cc1-9397-d78402a33549" class="image" style="text-align:left"><a href="AWS%E3%81%A6%E3%82%99Knowledge%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%97%E6%83%85%E5%A0%B1%E6%8A%95%E7%A8%BF%E3%82%92%E9%9B%86%E7%B4%84%204619125b03ce46f89289801a1f544662/%25E3%2582%25AD%25E3%2583%25A3%25E3%2583%2597%25E3%2583%2581%25E3%2583%25A3284-20240319_090653.jpg"><img style="width:336px" src="AWS%E3%81%A6%E3%82%99Knowledge%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%97%E6%83%85%E5%A0%B1%E6%8A%95%E7%A8%BF%E3%82%92%E9%9B%86%E7%B4%84%204619125b03ce46f89289801a1f544662/%25E3%2582%25AD%25E3%2583%25A3%25E3%2583%2597%25E3%2583%2581%25E3%2583%25A3284-20240319_090653.jpg"/></a></figure><h1 id="cf8b957c-3d5c-43ec-a0a1-8f617c9cbb67" class="">目次</h1><hr id="7093f169-854a-41ed-85fe-204101a9dd51"/><nav id="bcec4aa4-84c2-40e0-a57d-490e17ae6513" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#cf8b957c-3d5c-43ec-a0a1-8f617c9cbb67">目次</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5825f63a-c0a8-45ba-b648-993cd4b072f0">はじめに</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d5550920-9157-4811-a0e4-8c0096933f17">Knowledge構成</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0ee60da8-36bd-45fb-81c4-bb7c3f08768f">EC2の設定-tomcatインストール</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b6ca4149-205c-4505-9878-640e610665f9">EC2の設定-Apacheインストール</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#22574f11-d3cb-4d3c-8ee8-7bf4a7359f27">EC2の設定-ApacheとTomcatの連携設定</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#80af9028-8327-4553-b9f0-358007e683ba">EC2の設定-knowledgeのインストール</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#9d2dea1b-85a2-4333-9a88-79b03efb65ee">補足</a></div></nav><h1 id="5825f63a-c0a8-45ba-b648-993cd4b072f0" class="">はじめに</h1><hr id="1ce2d70b-23f3-49ec-a22c-eb09adc9a55a"/><p id="a2dbe25c-c000-43ac-90a2-ee73b549372c" class="">KnowledgeとはOSSの情報共有ツールになります。 Qiitaと機能はよく似ていおり、</p><p id="c114bed6-2a6f-4050-8758-4cff8bedb6f5" class="">QiitaがPublic版であれば、Knowledgeはプライベート用といったところでしょうか。 機能としては以下の様な機能があります。</p><p id="4c160398-3117-4737-9072-a7262313d6d7" class="">・投稿（タグ付、ファイル添付可能） </p><p id="648d380f-12d6-4665-89c9-2cf4dc966af2" class="">・投稿はMarkdown形式 </p><p id="20e46328-fda1-4e3d-b8db-6f2ec775fb54" class="">・情報公開の範囲を設定可能</p><p id="70679f8d-4567-4d10-959a-2b24e77fd238" class=""> ・検索がしやすい </p><p id="3d71f832-912c-4fdd-8543-e3217970b46c" class="">・他のアプリケーションと連動しやすい（Webhhok機能がある）</p><p id="4cfb8ac4-404e-444c-92f0-0d543780b3e1" class="">回し者ではないですが、やる前にどんなことができるか確認してみたい人は、</p><p id="789254c7-2fb9-4678-b1cc-912032b1cedc" class=""> <a href="https://test-knowledge.support-project.org/open.knowledge/list">こちらのリンク</a>よりデモサイトにて、操作することができるので確認してみて下さい。 </p><p id="d5160eaa-de79-4d6a-a3b6-faf14825c8ae" class="">※ユーザーIDとパスワードは<a href="https://information-knowledge.support-project.org/ja/">こちら</a>の下の方に書かれています。</p><h1 id="d5550920-9157-4811-a0e4-8c0096933f17" class="">Knowledge構成</h1><hr id="97dddc8c-fbb6-498e-9ec3-17abf1e75b98"/><p id="5b2bc778-cc71-445d-9cc8-3de4e58f32d0" class="">インストールするためにはApacheとTomcatで動作するため導入前のインストールと、 </p><p id="5268bfab-2728-4dae-a331-645b6741315f" class="">Postgresqlを使って利用します。 </p><p id="00765906-5b8e-4795-b652-985be3a6d7e4" class="">今回利用した環境はAWSの環境にて実施し、フロントはEC2、PostgresqlはRDSで動かしています。</p><h2 id="0ee60da8-36bd-45fb-81c4-bb7c3f08768f" class="">EC2の設定-tomcatインストール</h2><hr id="2fdabe0b-7c7a-4c28-94f1-a718748d2073"/><p id="0fb118e7-542b-4699-a87b-69db4691f4e4" class="">JDKをインストールします。Tomcat8を今回はインストールします。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="9116f53d-22c2-4c43-bb84-54328d3e9eed" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># yum -y install java-1.8.0-openjdk-devel</code></pre><p id="615fe078-8c09-4c9e-b7ba-1fc804696ebd" class="">javaのファイルパスを通します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="42fc0a3a-9e69-4060-9a7f-9999e516cdb3" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">echo &quot;export JAVA_HOME=$(readlink -e $(which java)|sed &#x27;s:/bin/java::&#x27;)&quot; &gt;  /etc/profile.d/java.sh
echo &quot;PATH=¥$PATH:¥$JAVA_HOME/bin&quot; &gt;&gt; /etc/profile.d/java.sh
source /etc/profile.d/java.sh</code></pre><p id="6a121ad2-652e-4681-aa9f-f83167fbfcc1" class="">tomcatを起動するユーザー作成します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="fbab4c19-90cc-446e-84e8-759a4942ea27" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># useradd -s /sbin/nologin tomcat</code></pre><p id="8f4d765a-0c4c-4c6e-b4e6-e84d3b3be851" class="">tomcatダウンロード＆展開します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="43389c57-2502-4a50-bbef-819f4dc7f4bf" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># mkdir -p /usr/local/src/tomcat
# cd /usr/local/src/tomcat
# curl -OL http://ftp.yz.yamagata-u.ac.jp/pub/network/apache/tomcat/tomcat-8/v8.5.57/bin/apache-tomcat-8.5.57.tar.gz
# tar zxvf apache-tomcat-8.5.57.tar.gz
# mv apache-tomcat-8.5.57.tar.gz /opt/
# chown -R tomcat. /opt/apache-tomcat-8.5.57
# ln -s /opt/apache-tomcat-8.5.43 /opt/tomcat
# echo &#x27;export CATALINA_HOME=/opt/tomcat&#x27;  &gt;  /etc/profile.d/tomcat.sh
# source /etc/profile.d/tomcat.sh</code></pre><p id="b6eb9211-97e6-455e-8e50-21edaccbe851" class="">tomcatのサービス登録をします。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="5aebb28f-9665-4f77-9d78-63c0329bb5eb" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># vi /etc/systemd/system/tomcat.service
[Unit]
Description=Apache Tomcat 8
After=syslog.target network.target

[Service]
User=tomcat
Group=tomcat
Type=oneshot
PIDFile=/opt/tomcat/tomcat.pid
RemainAfterExit=yes

ExecStart=/opt/tomcat/bin/startup.sh
ExecStop=/opt/tomcat/bin/shutdown.sh
ExecReStart=/opt/tomcat/bin/shutdown.sh;/opt/tomcat/bin/startup.sh

[Install]
WantedBy=multi-user.target</code></pre><p id="e34e6dd7-e581-4984-b6f8-d0115596f7da" class="">tomcatサービスに権限を与えて起動できるようにし、起動させます。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="586710d7-4d0d-47ec-b3b6-d65a2430fdba" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># chmod 755 /etc/systemd/system/tomcat.service
# systemctl start tomcat</code></pre><p id="c30ac6af-3b9d-41f7-8589-70665c180391" class="">TOPページにアクセスできることを確認します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="b80cf84d-32a0-4d61-b438-5c167fea8a5a" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># curl http://localhost:8080
# curl http://localhost:8080 -I
※念のため応答コード確認</code></pre><h2 id="b6ca4149-205c-4505-9878-640e610665f9" class="">EC2の設定-Apacheインストール</h2><hr id="992644fb-a9de-4733-9aa5-eb4eabcb3e7a"/><p id="b0e8cdf9-2b77-41b7-9d42-e909de2aed65" class="">Tomcatを連携するためにApacheをインストールします。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="0edc6a6f-9eb2-455d-bd50-bf0c2971623b" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># yum install httpd mod_ssl</code></pre><p id="921c0d1e-4773-4bfe-b984-7e0c6da0aa94" class="">以下モジュールを有効にします。(最終行に追記します)</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="4a2f77cb-b588-4b17-8efb-b68637eff3fd" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># vi /etc/httpd/conf.modules.d/00-proxy.conf
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_ajp_module modules/mod_proxy_ajp.so</code></pre><h2 id="22574f11-d3cb-4d3c-8ee8-7bf4a7359f27" class="">EC2の設定-ApacheとTomcatの連携設定</h2><hr id="16bc1ab2-5290-4ffa-91fb-4c9c68c220fe"/><p id="52c9775b-1992-481f-a692-0fa1dc1a649a" class="">今回は全リクエストをTomcatで処理するので、ajp通信の設定は以下とします。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="ab396fd1-655c-4190-986e-fa6dfda22b8c" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># vi /etc/httpd/conf.d/proxy-ajp.conf
ProxyPass / ajp://localhost:8009/</code></pre><p id="a27a6c8d-65d0-41aa-9e9e-b3f7dcb37663" class="">最後にTomcatの設定を実施します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="185280a6-db4e-47c8-8b20-a244ad1819f8" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># vi /opt/apache-tomcat-8.5.57/conf/server.xml

※8080ポートアクセスの不許可
    &lt;!--
    &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;
               connectionTimeout=&quot;20000&quot;
               redirectPort=&quot;8443&quot; /&gt;
    --&gt;

※8009ポートからのアクセス許可
    &lt;!-- Define an AJP 1.3 Connector on port 8009 --&gt;
    &lt;Connector protocol=&quot;AJP/1.3&quot;
               address=&quot;localhost&quot;
               port=&quot;8009&quot;
               secretRequired=&quot;false&quot;
               redirectPort=&quot;8443&quot; /&gt;</code></pre><p id="5c9616e6-02f8-437d-88e3-d7ba4a2e96ee" class="">設定が全て完了したら、Tomcat→Apacheの順で再起動して、 </p><p id="4a3eb263-8011-401d-8d4a-d9fab64ab5c8" class="">先程8080ポートでアクセスした時と同様にアクセスできることを確認し完了となります。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="722633e5-f990-491c-a49b-8e81ef6b7e7f" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># systemctl restart tomcat
# systemctl restart httpd
# curl http://localhost
# curl http://localhost -I
※念のため応答コード確認</code></pre><h2 id="80af9028-8327-4553-b9f0-358007e683ba" class="">EC2の設定-knowledgeのインストール</h2><hr id="ef91d335-97f6-4054-9654-7f2429a22300"/><p id="61f877f3-b39c-4b73-b73d-088908b85649" class="">tomcatをインストールしたディレクトに移動します。 私の場合には/opt/tomcat/webappsとなります。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="605e01dd-7027-4a8a-83ad-e6283033110c" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># cd /opt/tomcat/webapps
# pwd
/opt/tomcat/webapps</code></pre><p id="69a996e2-afbd-4f97-bb7d-c5c70e325106" class="">Knowledgeファイルをダダウンロードします。（最新版は2018年7月22日でそこから更新が停止していますね。。。）</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="15ce2e69-e290-4a13-ae72-b89539ef42ba" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># curl -LO https://github.com/support-project/knowledge/releases/download/v1.13.1/knowledge.war
# ls knowledge.war
knowledge.war</code></pre><p id="a520f295-cbb1-4c97-89d1-be04413b40f0" class="">TomcatとApacheを再起動します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="e3d9cd8e-229f-49d1-9c66-cb0e580f9d00" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># systemctl stop httpd
# systemctl stop tomcat
# systemctl start tomcat
# systemctl start httpd</code></pre><p id="21fb4b73-9783-4783-bec5-bd0c5578c5b7" class="">URLにアクセスして表示を確認します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="4bc8ebf0-09c0-4e29-b3e2-3d7804780949" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">http://サーバIPアドレス/knowledge</code></pre><p id="3897b0db-e76e-4e53-95a4-868b248ef9b7" class="">ログインIDとパスワードはadmin/admin123となっていますので、ログインできることを確認して下さい。 </p><p id="89cfe693-8fd9-46c5-9e27-43c07619f5ab" class="">システム設定でログインしないと投稿が見れない設定などあるので、一通り設定内容を確認することをお勧めします。</p><h1 id="9d2dea1b-85a2-4333-9a88-79b03efb65ee" class="">補足</h1><hr id="fe6ccc47-267c-4c30-9d8a-dc357408c5df"/><p id="d48676c6-62c2-4d35-98a5-6bac7a1cbcc6" class="">①DBとして組み込みデータベースの（H2Database）を使っているので、PostgreSQLに切り替えた方がよいと思います。 </p><p id="9b93bb0f-7531-4c80-8b05-9204c5eb7d81" class="">私はAWS環境に構築していたのでDBはRDSで起動してDBの切り替えを行っています。</p><p id="1206e052-af17-4988-9306-3c764ba4655e" class=""> 公式マニュアルに手順があるので、<a href="https://information-knowledge.support-project.org/postgresql-ja">こちらを参考</a>に実施してみて下さい。</p><p id="f50cbcc5-7288-4298-9324-d7e712c5d80f" class="">
</p><p id="fc4af76c-5c94-43b9-ba32-0477d357f83c" class="">②Knowledgeは新規投稿があった際にメール通知やWebhookで通知ができます。</p><p id="72fc9c2f-1499-430b-86c2-73e0c78c05ee" class=""> Webhookは受け先を作れば簡単に連携（例えばSlackなど）できます。</p><p id="13ba9a6f-aafb-4e74-9f8c-de15c6dd4001" class=""> メールとなるとPostfixになりますが、EC2上でPostfixなどは動かしたくないです。 </p><p id="01bc8e68-011c-4f8a-bd29-19e806a3dbb8" class="">そのためAWS SESを利用してSMTPサーバを準備しました。流れは以下の通りです。</p><p id="c552d9cc-228e-4328-8560-73bec04d6fe6" class="">
</p><ul id="a10f5837-be7a-43cb-820f-00f7b5112b9c" class="bulleted-list"><li style="list-style-type:disc">Simple Mail Transfer Protocol (SMTP) settingsでIAMを作成 SMTPユーザ名とパスワードが表示されるので、CSVなどをダウンロードするなりメモしましょう。</li></ul><ul id="ab6e505d-381c-435d-aafe-90de4f662444" class="bulleted-list"><li style="list-style-type:disc">Verified identitiesで送信に利用するメールアドレスを登録して認証実施</li></ul><ul id="9ecc30cb-f143-4a48-a988-b83a36df001c" class="bulleted-list"><li style="list-style-type:disc">EC2にcyrus-saslをインストールして、Postfixの設定(/etc/postfix/main.cf)に以下追記</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="fed87f54-6c4e-427c-a0c3-66b32bffcd57" class="code"><code class="language-Bash">smtp_tls_security_level = encrypt
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_sasl_security_options = noanonymous
relayhost = [email-smtp.ap-northeast-1.amazonaws.com]:587
smtp_sasl_auth_enable = yes
smtp_use_tls = yes
smtp_tls_CAfile = /etc/ssl/certs/ca-bundle.crt</code></pre><ul id="2c4f3b1e-eabe-45dd-894c-41ad3ede08d8" class="bulleted-list"><li style="list-style-type:disc">/etc/postfix/sasl_passwdに、SMTPユーザ名とパスワードを記載 [email-smtp.ap-northeast-1.amazonaws.com]:587 SMTPユーザ名:SMTPパスワード</li></ul><ul id="3dde378f-4c2d-4bbc-a869-c6b44c64a579" class="bulleted-list"><li style="list-style-type:disc">hashmapファイルを作成</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="a8825fcc-eeb7-44c4-ba44-c12effbeb34b" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># postmap hash:/etc/postfix/sasl_passwd
# chmod 0600 /etc/postfix/sasl_passwd /etc/postfix/sasl_passwd.db</code></pre><ul id="e5d430f7-3844-4b33-995c-c049e3ad370a" class="bulleted-list"><li style="list-style-type:disc">CA情報の場所をPostfixが認識できるようにする</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="7712aa90-2a3c-4dc5-a405-361b094fb2bb" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># postconf -e &#x27;smtp_tls_CAfile = /etc/ssl/certs/ca-bundle.crt&#x27;</code></pre><ul id="2baebc6a-247a-4b8f-a8f0-c14d9964d06c" class="bulleted-list"><li style="list-style-type:disc">postfixを再起動</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="91b3deba-693a-4e71-871b-7d7f61af4431" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all"># postfix reload</code></pre><ul id="03659a8a-b0aa-4513-9e59-734ff5ce6e36" class="bulleted-list"><li style="list-style-type:disc">テストメールを発行してメールが届くか確認を実施、問題なければKnowledgeサイトのメール設定を設定する</li></ul><p id="b553b55f-196b-4fc0-9007-0fc02a4a2b69" class="">
</p><p id="3de98eea-3cce-419d-afc6-c618dc213e89" class="">③Sandboxという制限がかけられているので制限緩和の申請を実施 制限かけられているとFromやToは認証済みのものでないと指定できないのでとても困ります。</p><p id="45f1e1d2-1f29-4c15-a2d1-86d103dd461b" class="">また当たり前ですが申請する際には理由を正しく書かないと却下されます。 </p><p id="84bbf8e2-f6b6-4863-ba00-6e624d566151" class="">承認は1日程度で承認されました。 制限緩和はSES Dashboardから実施します。以下のような画像が表示されていたら制限がかかっています。<div class="indented"><figure id="4dbfa67c-47e3-46f9-9bb4-990aa1bddd3a" class="image" style="text-align:left"><a href="AWS%E3%81%A6%E3%82%99Knowledge%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%97%E6%83%85%E5%A0%B1%E6%8A%95%E7%A8%BF%E3%82%92%E9%9B%86%E7%B4%84%204619125b03ce46f89289801a1f544662/image1.png"><img style="width:1680px" src="AWS%E3%81%A6%E3%82%99Knowledge%E3%82%92%E6%A7%8B%E7%AF%89%E3%81%97%E6%83%85%E5%A0%B1%E6%8A%95%E7%A8%BF%E3%82%92%E9%9B%86%E7%B4%84%204619125b03ce46f89289801a1f544662/image1.png"/></a></figure></div></p><p id="898403ae-8928-4a8b-b98c-0ede1adc10e5" class="">
</p><p id="50e720b4-33c0-46b0-8a07-594638e8d990" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>