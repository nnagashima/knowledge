<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>kubernetes用語</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="7c89daf1-c59e-4d41-a224-f991deb60030" class="page sans"><header><h1 class="page-title">kubernetes用語</h1><p class="page-description"></p><table class="properties"><tbody><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>タグ</th><td></td></tr></tbody></table></header><div class="page-body"><figure id="9adc40f9-b0ec-431f-8dc5-91aef7f38d4a" class="image" style="text-align:left"><a href="kubernetes%E7%94%A8%E8%AA%9E%207c89daf1c59e4d41a224f991deb60030/kubernetes-icon-2048x1995-r1q3f8n7.png"><img style="width:288px" src="kubernetes%E7%94%A8%E8%AA%9E%207c89daf1c59e4d41a224f991deb60030/kubernetes-icon-2048x1995-r1q3f8n7.png"/></a></figure><p id="7b172886-7eac-4180-818d-35562ed8c906" class="">目次</p><nav id="ddf90907-4fd7-433f-8058-5a49a23efa68" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2f37dfaf-a1a5-4b95-9f57-a174a3b7ffaa">そもそもkubernetesとは</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#01d0795a-ceb3-4b03-a736-430aa7d7c578">kubernetesで出てくる用語</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3cbfad5f-4497-4fab-91de-8b926247744e">Node</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d2b94236-e5c2-4c8d-90df-9cb4de781268">Pod</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f0705e97-6838-47f2-9e5c-3cb9c1f1a3fc">Replicaset</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#97a568c1-1378-40b9-abe1-155582bb53c0">Deployment</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e7a84254-fcbc-494d-94fb-6f5b96449025">Service</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#54f3e159-e52c-4803-8106-f727791aa17e"> なぜkubernetesを調べたのか</a></div></nav><h1 id="2f37dfaf-a1a5-4b95-9f57-a174a3b7ffaa" class="">そもそもkubernetesとは</h1><hr id="1289da9f-3730-8058-8727-f5adf0087c27"/><p id="46a2c47f-021c-4707-9028-b3bd08857f6e" class="">DockerやDockerComopseで起動するコンテナはホストに依存し、ホストが倒れたらコンテナも当然のように倒れます。</p><p id="d7393ed8-241e-4b3d-8dde-325993de149f" class="">そのためにはホスト間を跨いでコンテナが起動するようにする必要があります。</p><p id="addb8e75-a8ce-466e-a9b6-0a743b0f8de7" class="">これを解決してくれるのがコンテナオーケストレーションになり、kubernetesはその一つです。</p><p id="20423fa6-9a8e-49e2-97d2-409c547dc1ff" class="">※他にもDockerSwarmがありましたが、kubernetesに負けてしまったのかな？</p><h1 id="01d0795a-ceb3-4b03-a736-430aa7d7c578" class="">kubernetesで出てくる用語</h1><hr id="1289da9f-3730-8012-8776-cbf2ef658cfc"/><p id="3a0e7bae-6f8e-435c-8cc6-867844021801" class="">何事もそうですが用語がわからないことには次に進めませんよね。</p><p id="0a57c13b-86a9-4fbd-8ac2-c21cafcddba3" class="">そこで出てくる用語を簡単にまとめてみました。</p><h2 id="3cbfad5f-4497-4fab-91de-8b926247744e" class="">Node</h2><p id="79b95005-8d1f-4512-8d12-6f3e541cb5bc" class="">kubernetesを実行する仮想マシンもしくは物理マシンのことです。</p><p id="7aea1b47-5ded-4bf2-8553-ed892077e027" class="">kubernetesではNodeが複数集まってクラスターを構成します。</p><p id="a3f74cf4-b5c8-48ec-b4ae-75e9dd20f54c" class="">NodeにはMasterとWorkerが存在し、MasterがWorkerノードをコントロールします。</p><p id="00012fe1-d53d-4ad1-ac53-9fb15996b328" class="">利用ユーザーはMaster側からコマンドを利用して指示を出してコントロールをしていきます。</p><h2 id="d2b94236-e5c2-4c8d-90df-9cb4de781268" class="">Pod</h2><p id="6dc5f845-7d0e-45a3-9822-0290fba7e2e9" class="">コンテナをグループ化する単位になります。</p><p id="ec0ac279-ffb0-4b98-9e19-28e1ea880e14" class="">そのためコンテナが単一のPodもあれば、複数コンテナが存在するPodもあります。</p><h2 id="f0705e97-6838-47f2-9e5c-3cb9c1f1a3fc" class="">Replicaset</h2><p id="51fe2449-f3aa-4271-a7f0-221a37745e92" class="">Podのレプリカ作成やPodの起動数の管理を行う機能になります。</p><h2 id="97a568c1-1378-40b9-abe1-155582bb53c0" class="">Deployment</h2><p id="02c959a5-25c5-494a-b073-2bfb00529e49" class="">Replicasetを管理しデプロイ状態を管理するリソースとなり、Podに異常があれば再起動などを試み正常なPod数で起動するように管理します。</p><h2 id="e7a84254-fcbc-494d-94fb-6f5b96449025" class="">Service</h2><p id="17e2eb1b-f4f6-4e35-beb2-b863bbab155e" class="">実行中のPodにアクセスしやすいようにエンドポイントを提供します。</p><p id="25dd763d-18f6-402a-83d7-cbd136e82408" class="">
</p><h1 id="54f3e159-e52c-4803-8106-f727791aa17e" class=""> なぜkubernetesを調べたのか</h1><hr id="1289da9f-3730-8059-bf14-ed546477955a"/><p id="ea68e93c-b021-4eee-a66e-4151eb59f621" class="">単純に言うと難しそうでワクワクしたからです。</p><p id="1fba04d0-446c-4e12-b4db-9f5b92150c6f" class="">あとはナレッジや公式ドキュメントが英語ということもあり、久しく英語環境に触れていない私にとっては復習にもなると思ったからです。</p><p id="bde4bbc5-3f03-4fe1-a928-457dbc68a34d" class="">またCKAを昨年取得しているのですが、CKAを取得するにも机上のみでは私は勉強が捗らない傾向にあり、</p><p id="34b0ab7a-f7c0-45e3-b78f-38d246029393" class="">実践を通してやったほうが覚えが早いということもありました。</p><p id="90ae5884-dc1a-43a0-8123-fefbd0b132b5" class="">そのためにベアボーンの機器にメモリを詰めるだけ積んでやSynologyのNASを購入して環境を整えました。</p><p id="0c9fbd94-396a-4654-8c61-0608ee9d2989" class="">やりたいことはDBのHA構成を簡単に用意したいこと、VMをKubernetes環境の上で実行することです。</p><p id="91001651-73eb-4b23-b586-b2bd8c472880" class="">
</p><p id="c91124f6-268b-4a22-be63-f360878b8afa" class="">通常DBを冗長化するにはPacemaker+pgpool-II+Postgresであったり、PatoroniであったりあるのですがHA構成組むだけでまぁ大変です。</p><p id="ad36e8e8-f83f-4d7a-838b-2571918b30e0" class="">仕組みを理解し勉強するのはとても楽しいですが、とにかくHA構成を作るのに時間がかかる上に運用で気にしないといけないことが多々あります。</p><p id="07fe0705-ddb4-4ba2-87e5-4ab92998e3bb" class="">DBに至ってはZalando Postgres Operatorというものがあるのですが、</p><p id="e6aeaade-f18d-4d5c-8a30-9c52a9209bd7" class="">コンテナの管理ツールであるKubernetes上でHA構成のPostgreSQLクラスタを容易に構築できるようにするoperatorです。</p><p id="84e7f80a-1aae-41fa-b7f4-1ca8aecfc750" class="">※operatorはKubernetesの機能を拡張するプラグインみたいなものです。</p><p id="d42e3acf-3fe7-40e6-b968-95e392e7fa95" class="">
</p><p id="1bc90769-a8b1-4229-8859-5bf105f7fdfe" class="">PostgresOperatorには以下機能があります。</p><ul id="23c3babb-82a2-4c4e-9587-c679a046c596" class="bulleted-list"><li style="list-style-type:disc">PostgreSQL HAクラスタの管理</li></ul><ul id="9f514ce4-e11d-4751-a01d-5172cbede54f" class="bulleted-list"><li style="list-style-type:disc">ストリーミングレプリケーション (同期・非同期)</li></ul><ul id="ed1ac909-13e7-4588-b18d-659e62eba679" class="bulleted-list"><li style="list-style-type:disc">コネクションプール (PgBouncer使用)</li></ul><ul id="e657ac96-d541-4f2b-90c5-90a44c33ee0f" class="bulleted-list"><li style="list-style-type:disc">フェイルオーバー (pg_rewindにより高速な復旧が可能)</li></ul><ul id="5f145db7-2f5b-46c0-85cf-c6f173a625e1" class="bulleted-list"><li style="list-style-type:disc">ローリングアップデート</li></ul><ul id="808ddf00-20bd-4108-b7fc-9672b05f914f" class="bulleted-list"><li style="list-style-type:disc">論理バックアップ (S3使用)</li></ul><ul id="352ab553-1eff-4bd8-9b26-5e1cbb0c299e" class="bulleted-list"><li style="list-style-type:disc">WALアーカイブ・PITR (WAL-E、S3使用)</li></ul><figure id="dace330d-2a62-44ed-82e7-ed768ec9c26a" class="image"><a href="kubernetes%E7%94%A8%E8%AA%9E%207c89daf1c59e4d41a224f991deb60030/Untitled.png"><img style="width:707.984375px" src="kubernetes%E7%94%A8%E8%AA%9E%207c89daf1c59e4d41a224f991deb60030/Untitled.png"/></a></figure><p id="f3b3e7e7-5b36-4ef4-9673-7eabbb38bd06" class="">
</p><p id="e14bab14-20c8-4d23-ba47-92adebefdc93" class="">一方でZalando Postgres OperatorはPrometheusで監視するために自前で監視するための設定が必要となります。</p><p id="b9350943-f90c-4b90-b12c-f6bf47c15d26" class=""><a href="https://shivering-isles.com/postgres-operator-with-monitoring">このサイトが参考になるかと思いますので、リンクをつけておきます。</a></p><p id="77833cd6-777b-4305-98fe-cfb0cfd66e5b" class="">
</p><p id="1e9ead61-dc11-4082-84d1-d7f4909aa2f6" class="">もう一つの理由で挙げていたVMをKubernetes環境の上で実行です。</p><p id="1de8a1f9-0462-4635-b0d7-ad6383511413" class="">全てコンテナとして実行できれば、それはそれで理想だと思いますが、そうはいかないものも世の中にはたくさんあるかと思います。</p><p id="ccecf6f3-fba7-4ca7-a4ab-105ef19d1e0b" class="">なのでkubernetes上でVMを起動して管理ができたらいいなと思って調べていたらKubeVirtとなるものを見つけました。</p><p id="6a37f4e5-f6c5-4ed7-9c2e-3035322fb627" class="">まだ触れたこともないのでちゃんと理解はできておりませんがKubernetes上にインストールするアドオンでPodと同じノードでVMを起動するようです。</p><p id="06c20066-6a81-4e06-93c1-7a073e9fb416" class="">ちなみに執筆時点(2023/01/27)時点でv0.58.0なのでv1に到達しておりません。</p><p id="eb6378ac-19b6-4141-b48c-47dd7c4144d2" class="">
</p><p id="cca40398-c204-464a-8189-1152a76b18e7" class="">これらを2つを利用することでkubernetesの勉強をしつつ、なんちゃんてマネージドサービスの真似事ができるのではないかと考え、</p><p id="c0d36f47-4865-4398-99ff-cbe4be0f5917" class="">やる気を出した感じです。</p><p id="88749972-8976-40dd-a61e-817ed530e7c5" class="">
</p><p id="be345ad9-7c67-4563-8abd-a3802add89ca" class="">また他にも今までVMで動かしていたものを少しずつkubernetes環境に移行して、</p><p id="9cef4289-90a1-4b80-b151-bc1d335149a2" class="">最終的には全て載せることが最高だなと思っていますが、そんな未来はまだまだ先だろうと思っています。</p><p id="4003fa66-2324-4ba9-91c5-ffe462f5b2a9" class="">※キャッシュDNSとかMinecraftとかZabbixとかGuacamoleを移行対象に考えています。</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>