<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>RHEL9検証 ④初期設定</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="c0706a94-1828-4d31-833f-539825ecae05" class="page sans"><header><h1 class="page-title">RHEL9検証 ④初期設定</h1><p class="page-description"></p><table class="properties"><tbody><tr class="property-row property-row-multi_select"><th><span class="icon property-icon"><svg role="graphics-symbol" viewBox="0 0 16 16" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.45);flex-shrink:0" class="typesMultipleSelect"><path d="M1.91602 4.83789C2.44238 4.83789 2.87305 4.40723 2.87305 3.87402C2.87305 3.34766 2.44238 2.91699 1.91602 2.91699C1.38281 2.91699 0.952148 3.34766 0.952148 3.87402C0.952148 4.40723 1.38281 4.83789 1.91602 4.83789ZM5.1084 4.52344H14.3984C14.7607 4.52344 15.0479 4.23633 15.0479 3.87402C15.0479 3.51172 14.7607 3.22461 14.3984 3.22461H5.1084C4.74609 3.22461 4.45898 3.51172 4.45898 3.87402C4.45898 4.23633 4.74609 4.52344 5.1084 4.52344ZM1.91602 9.03516C2.44238 9.03516 2.87305 8.60449 2.87305 8.07129C2.87305 7.54492 2.44238 7.11426 1.91602 7.11426C1.38281 7.11426 0.952148 7.54492 0.952148 8.07129C0.952148 8.60449 1.38281 9.03516 1.91602 9.03516ZM5.1084 8.7207H14.3984C14.7607 8.7207 15.0479 8.43359 15.0479 8.07129C15.0479 7.70898 14.7607 7.42188 14.3984 7.42188H5.1084C4.74609 7.42188 4.45898 7.70898 4.45898 8.07129C4.45898 8.43359 4.74609 8.7207 5.1084 8.7207ZM1.91602 13.2324C2.44238 13.2324 2.87305 12.8018 2.87305 12.2686C2.87305 11.7422 2.44238 11.3115 1.91602 11.3115C1.38281 11.3115 0.952148 11.7422 0.952148 12.2686C0.952148 12.8018 1.38281 13.2324 1.91602 13.2324ZM5.1084 12.918H14.3984C14.7607 12.918 15.0479 12.6309 15.0479 12.2686C15.0479 11.9062 14.7607 11.6191 14.3984 11.6191H5.1084C4.74609 11.6191 4.45898 11.9062 4.45898 12.2686C4.45898 12.6309 4.74609 12.918 5.1084 12.918Z"></path></svg></span>タグ</th><td><span class="selected-value select-value-color-blue">RHEL</span></td></tr></tbody></table></header><div class="page-body"><figure id="5a5a3f3e-1998-459d-835d-2ff262e25526" class="image" style="text-align:left"><a href="RHEL9%E6%A4%9C%E8%A8%BC%20%E2%91%A6%20Cockpit%E5%B0%8E%E5%85%A5%201289da9f37308067a685deffd613c2bf/images.png"><img style="width:204px" src="RHEL9%E6%A4%9C%E8%A8%BC%20%E2%91%A6%20Cockpit%E5%B0%8E%E5%85%A5%201289da9f37308067a685deffd613c2bf/images.png"/></a></figure><p id="36cdb131-2c67-414c-8ce7-27cabc33f062" class="">RHEL9における主な変更点についてはRHにて提供されているのでページを参照してください。</p><figure id="0fb708df-7c48-44fe-adfd-5548fed2e66f"><a href="https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/9/html/9.0_release_notes/overview" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">第1章 概要 Red Hat Enterprise Linux 9 | Red Hat Customer Portal</div><div class="bookmark-description">セキュリティー 暗号化を目的とした SHA-1 メッセージダイジェストの使用は、RHEL 9 では非推奨になりました。SHA-1 によって生成されたダイジェストは、ハッシュ衝突の検出に基づく多くの攻撃の成功例が記録化されているため、安全であるとは見なされません。RHEL コア暗号コンポーネントは、デフォルトで SHA-1 を使用して署名を作成しなくなりました。RHEL 9 のアプリケーションが更新され、セキュリティー関連のユースケースで SHA-1 が使用されないようになりました。 例外の中でも、HMAC-SHA1 メッセージ認証コードと Universal Unique Identifier (UUID) 値は、SHA-1 を使用して作成できます。これは、これらのユースケースが現在セキュリティーリスクをもたらさないためです。SHA-1 は、Kerberos や WPA-2 など、相互運用性および互換性に関する重要な懸念事項に関連する限られたケースでも使用できます。詳細は、 FIPS140-3 に準拠していない暗号化を使用する RHEL アプリケーションのリスト セクションを参照してください。 まだ SHA-1 を必要とするシステムとの互換性の問題の解決策については、次の KCS の記事を参照してください。 OpenSSL が、バージョン 3.0.1 で提供されるようになりました。このバージョンでは、プロバイダーのコンセプト、新しいバージョニングスキーム、改良された HTTP(S) クライアント、新しいプロトコル、フォーマット、アルゴリズムのサポートが追加されている他、その他多くの改良が加えられています。 システム全体の 暗号化ポリシー が、最新のセキュアデフォルトを提供するように調整されました。 OpenSSH がバージョン 8.7p1 で配布されており、RHEL 8.5</div></div><div class="bookmark-href"><img src="https://access.redhat.com/webassets/avalon/g/favicon.ico" class="icon bookmark-icon"/>https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/9/html/9.0_release_notes/overview</div></div><img src="https://access.redhat.com/webassets/avalon/g/shadowman-200.png" class="bookmark-image"/></a></figure><p id="814a8f06-5eb8-496d-a4ba-b18bc09ddd0b" class="">
</p><p id="5b789377-0af3-4159-a861-268719052043" class="">目次</p><nav id="a1382627-2d9e-409f-9492-d7b96add6b59" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f1d86d85-506d-442c-bde3-a75ad6effd21">1. SSH接続と設定について</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#848c25a9-edea-4aaf-a69f-25e79567478b">2. Hostname変更</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#918c071a-e2b3-44fd-b188-79cdf137933e">3. Firewall設定</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6a850f99-2d86-44fb-becf-43e4ace09b42">4. OS言語設定</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#369e98a1-17db-478b-b549-8c0960b7ad8e">5. TimeZone設定</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#aa90f6dd-ace8-40ce-b8ac-523e731e83be">6. SELinuxの設定</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#7dfc1a74-6cf9-4ba0-b1e1-0c1139d391f3">7. システムの最新化</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#89adcd39-5733-41eb-b8aa-93a57a6d452d">8. ユーザーの追加</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#199b2397-0958-447c-bdda-3be837c17cc7">9. SUDOの設定</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#f16197f0-8de0-4a32-8884-cde24a570a64">10. Networkの設定</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#0428b93b-1f89-4bce-9bad-b79077fba6ac">11. NTP設定</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#63919cae-f6cd-4cb0-9a26-84b97d54a293">12. NFSクライアント</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#9756d062-66da-4d1e-a009-6f14d1a2ac8b">13. 主要PKGのバージョンについて</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#30eb3cc4-166f-42cb-a7c3-b68a86171906">14. /var/log配下のログ運用</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#1549da9f-3730-80ec-a165-e6824db7ad40">上記までしなくてもいいけど、毎日ログローテートさせたい場合</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#5f40a301-891f-4ecc-8b2d-bd1730cc1f9d">15. boot.logの出力</a></div></nav><h1 id="f1d86d85-506d-442c-bde3-a75ad6effd21" class="">1. SSH接続と設定について</h1><hr id="1289da9f-3730-8092-b9c2-f01dff359d3f"/><p id="29080591-9429-4f7e-baae-77027b441018" class="">RHEL9よりデフォルトでSHA1認証が無効化されたことによる影響で、現時点でTerratermでログインすることができません。</p><p id="8f1a6411-faf2-483c-8ae5-b27799a3899b" class="">※RHEL9だけでなくUbutu22.04でも同じことが発生します。</p><p id="01093938-3691-4edb-8627-3e1879628340" class="">対処方法としては以下となります。</p><ul id="b5092fd5-ce0c-442e-97a5-6d7cbafe94ee" class="bulleted-list"><li style="list-style-type:disc">Terraterm 5.x以上を使えるなら、RSA形式でも接続できます。</li></ul><ul id="65fb5e0c-a36d-471b-95d2-6ad7420eb0bf" class="bulleted-list"><li style="list-style-type:disc">Terraterm以外のクライアントソフトを使ってログインする</li></ul><ul id="21f7d3f1-bb25-4d3d-8fc8-54d67963b6ca" class="bulleted-list"><li style="list-style-type:disc">古いTerratermで接続したいのであればcrypto-policesのデフォルトをSHA1にする（セキュリティレベルが下がる）</li></ul><p id="1549da9f-3730-8099-8001-c6a18a527288" class="">
</p><p id="1549da9f-3730-801b-aa7d-f2692bf4015f" class="">またsshの設定ですが、RHEL9のSSHバージョンからは、/etc/ssh/sshd_configに追加設定することを推奨としていません。<br/>追加設定がある場合には、/etc/ssh/sshd_config.d/配下に設定ファイルを新規作成してください。<br/>本ディレクトリの設定ファイル読み込み順は辞書式順序になるので設定を優先したい場合には、<br/>本ディレクトリにある設定ファイルの番号より先の番号にしてあげた後、sshd -Tコマンドで設定が反映できているか確認してください。<br/>例：40-custom.confなど<br/></p><h1 id="848c25a9-edea-4aaf-a69f-25e79567478b" class="">2. Hostname変更</h1><hr id="1289da9f-3730-80d2-a61c-eafb4895db78"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="df7624db-000f-482c-8c36-9bee781f686a" class="code"><code class="language-Bash"># hostnamectl set-hostname hostname
# uname -n
hostname</code></pre><h1 id="918c071a-e2b3-44fd-b188-79cdf137933e" class="">3. Firewall設定</h1><hr id="1289da9f-3730-803b-9a36-f5fa822f5160"/><p id="947410c1-7bca-46c3-92d1-cd7057041445" class="">firewalld を使用した ipset でアクセスの可否をリスト管理していましたが、</p><p id="be98549d-cabd-4f75-9ec3-3e60869ab549" class="">RHEL9 から ipset が廃止になったという事なので nftables を利用します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="070bd2c0-997f-43f8-b414-55f18e5e8214" class="code"><code class="language-Bash"># cat /etc/firewalld/firewalld.conf | grep nftables
#       - nftables (default)
FirewallBackend=nftables</code></pre><p id="1311e122-136c-4d7d-9fcf-9aeb630b19f9" class="">Firewallを利用しない場合には以下コマンドで停止と自動起動をOFFしてください。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="5e24a0d9-0845-4438-a44c-34aea9bf1c36" class="code"><code class="language-Bash"># systemctl disable --now firewalld</code></pre><p id="0437e509-bc7b-49b5-9772-7030586437d7" class="">Firewallを利用する場合にはFirewalldを停止して、nftablesサービスを起動してください。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="6fbc5f8b-2090-4c76-8a5b-e6660020292a" class="code"><code class="language-Bash"># systemctl disable --now firewalld
# systemctl enable --now nftables</code></pre><h1 id="6a850f99-2d86-44fb-becf-43e4ace09b42" class="">4. OS言語設定</h1><hr id="1289da9f-3730-8038-ace1-f2e1685f79cd"/><p id="87035a41-5244-4084-9d12-06825e52c554" class="">localectlで確認します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="251b558b-2c47-43a4-8e45-f0cd35b15757" class="code"><code class="language-Bash"># localectl status
   System Locale: LANG=ja_JP.UTF-8
       VC Keymap: jp
      X11 Layout: jp

# localectl list-locales
C.UTF-8
ja_JP.UTF-8

変更する場合のコマンド例
# localectl set-locale LANG=ja_JP.utf8

日本語PKGがない場合
# dnf isntall glibc-langpack-ja</code></pre><h1 id="369e98a1-17db-478b-b549-8c0960b7ad8e" class="">5. TimeZone設定</h1><hr id="1289da9f-3730-8033-a1a2-caf0ae38443e"/><p id="c0cf398a-639b-4194-ac43-be17355d37d4" class="">timedatectlで確認します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="6cb9fae9-af9d-4766-8b68-28dfea91bc3b" class="code"><code class="language-Bash"># timedatectl 
               Local time: 月 2023-02-06 14:58:43 JST
           Universal time: 月 2023-02-06 05:58:43 UTC
                 RTC time: 月 2023-02-06 05:58:43
                Time zone: Asia/Tokyo (JST, +0900)
System clock synchronized: yes
              NTP service: active
          RTC in local TZ: no

変更する場合のコマンド例
# timedatectl set-timezone Asia/Tokyo</code></pre><h1 id="aa90f6dd-ace8-40ce-b8ac-523e731e83be" class="">6. SELinuxの設定</h1><hr id="1289da9f-3730-8072-91df-f2aa335b063d"/><figure id="4461cbdc-b3fc-481f-85e9-60b21a59092c" class="link-to-page"><a href="RHEL9%E6%A4%9C%E8%A8%BC%20%E2%91%A1SELinux%E3%81%AE%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95%204461cbdcb3fc481f85e960b21a59092c.html">RHEL9検証 ②SELinuxの設定方法</a></figure><p id="81d64dce-f451-4d6e-96f1-a2dda06ecb4c" class="">を参考にしてください。</p><h1 id="7dfc1a74-6cf9-4ba0-b1e1-0c1139d391f3" class="">7. システムの最新化</h1><hr id="1289da9f-3730-8082-8292-fdb980b2dbee"/><p id="209d0f70-2371-47ff-b9f0-bfd2c349cbe3" class="">インストールやアップデートする際にはyumでもdnfでもどちらでも大丈夫そうです。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="c54156e3-d4fa-4abd-991d-a71dfe43e6f7" class="code"><code class="language-Bash"># ls -la /usr/bin/dnf
lrwxrwxrwx. 1 root root 5  1月 31 10:01 /usr/bin/dnf -&gt; dnf-3

# ls -la /usr/bin/yum
lrwxrwxrwx. 1 root root 5  1月 31 10:01 /usr/bin/yum -&gt; dnf-3

# dnf upgrade</code></pre><h1 id="89adcd39-5733-41eb-b8aa-93a57a6d452d" class="">8. ユーザーの追加</h1><hr id="1289da9f-3730-80c7-a7da-c9742e4c084d"/><p id="a9747ee2-a3e2-43c5-8f44-6ab71db7a3b3" class="">useraddでユーザー名を追加、ユーザーでSSHでログインするにあたりパスワードも設定します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="d4f89d34-9fa9-4607-b444-9cce91d66a35" class="code"><code class="language-Bash"># useradd username
# passwd username</code></pre><h1 id="199b2397-0958-447c-bdda-3be837c17cc7" class="">9. SUDOの設定</h1><hr id="1289da9f-3730-8043-94d4-dfb673b76fc7"/><p id="8d90009a-2aa1-46bd-a538-6324fa18c161" class="">追加したユーザーにroot 権限を付与したい場合にはvisudoで変更します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="564bb40a-bfcc-4d9a-9641-5cddbbc79249" class="code"><code class="language-Bash"># visudo

##root権限を全て利用
username  ALL=(ALL)       ALL

##root権限をパスワードなしで利用
username  ALL=NOPASSWD: ALL</code></pre><h1 id="f16197f0-8de0-4a32-8884-cde24a570a64" class="">10. Networkの設定</h1><hr id="1289da9f-3730-8060-a3a0-df4628a21143"/><p id="c6157682-32e8-4460-9663-21e53ef4ba8b" class="">RHEL9からNetworkMangerを使用し、/etc/sysconfig/network-scriptsによるネットワーク設定が廃止されました。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="773ad0f7-0219-48c8-84d9-5f695bf3d6eb" class="code"><code class="language-Bash">デバイス確認
# nmcli device

IPv4アドレス設定
# nmcli connection modify interface-name ipv4.addresses xxx.xxx.xxx.xxx/xx

ゲートウェイ設定
# nmcli connection modify interface-name ipv4.gateway xxx.xxx.xxx.xxx

DNS設定
# nmcli connection modify interface-name ipv4.dns xxx.xxx.xxx.xxx

DHCP無効
# nmcli connection modify interface-name ipv4.method manual

設定確認
# nmcli device show interface-name 

インターフェース再起動
# nmcli connection down interface-name &amp;&amp; nmcli connection up interface-name

IPv6無効化
# vi /etc/sysctl.conf
net.ipv6.conf.all.disable_ipv6 = 1
net.ipv6.conf.default.disable_ipv6 = 1
# sysctl -p</code></pre><h1 id="0428b93b-1f89-4bce-9bad-b79077fba6ac" class="">11. NTP設定</h1><hr id="1289da9f-3730-80bb-b9b5-ee4bd76b15fd"/><p id="60b5136c-e593-48dc-bc64-7f26087b1095" class="">Chronyを利用します。</p><p id="a57522c0-e87c-4852-9b7c-5df098c3105d" class="">ibrustを使用することで初回同期にかかる時間を改善することができます。</p><p id="9cb69182-1302-4f48-a54f-18a804fa48e3" class="">時刻同期する際、poolで設定していますがserverでも設定は可能です。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="aceb57bd-41b2-4c41-bcd3-bf87a0772323" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">de# cat /etc/chrony.conf
# Please consider joining the pool (http://www.pool.ntp.org/join.html).
pool 2.rhel.pool.ntp.org iburst #同期したいNTPサーバ指定

# Record the rate at which the system clock gains/losses time.
driftfile /var/lib/chrony/drift

# Allow the system clock to be stepped in the first three updates
# if its offset is larger than 1 second.
makestep 1.0 3　#1秒以上のズレが3回あった場合、slewモードにかわりstepによる時刻調整する

# Enable kernel synchronization of the real-time clock (RTC).
rtcsync

# Enable hardware timestamping on all interfaces that support it.
#hwtimestamp *

# Increase the minimum number of selectable sources required to adjust
# the system clock.
#minsources 2

# Allow NTP client access from local network.
#allow 192.168.0.0/16 #NTPクライアントからの接続を制限する場合の設定

# Serve time even if not synchronized to a time source.
#local stratum 10

# Specify file containing keys for NTP authentication.
keyfile /etc/chrony.keys

# Get TAI-UTC offset and leap seconds from the system tz database.
leapsectz right/UTC

# Specify directory for log files.
logdir /var/log/chrony #ログ保管ディレクトリを指定

# Select which information is logged.
#log measurements statistics tracking #取得するログの種類を指定

# RemoteHostからchronycなど確認をさせないようにします。
cmddeny all

設定したらChronyの再起動を実施
# systemctl restart chronyd

動作確認
# chronyc sources
MS Name/IP address         Stratum Poll Reach LastRx Last sample               
===============================================================================
^? 180.43.145.38                 0   7     0     -     +0ns[   +0ns] +/-    0ns</code></pre><h1 id="63919cae-f6cd-4cb0-9a26-84b97d54a293" class="">12. NFSクライアント</h1><hr id="1289da9f-3730-807e-b21b-e5a985efb3f9"/><p id="8d4c2658-89cb-4406-944c-419d62dffc92" class="">NFS共有マウントの方法はNFSクライアントを利用します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="8f3dbc1e-5f5e-4bb6-911b-6a8c25d82c8d" class="code"><code class="language-Bash"># dnf install nfs-utilis
# mount -t nfs ipaddress:/NFSサーバのマウントパス /マウントディレクトリ
# df -h
ipaddress:/NFSサーバのマウントパス   5.4T  1.2T  4.2T   23% /マウントディレクトリ</code></pre><p id="7dd1a7a0-267c-4bf2-b718-f911a05b84d8" class="">システム起動時にマウントしたい場合には/etc/fstabに記載します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1a9c8058-e087-4bee-a4b3-776829c6ba15" class="code"><code class="language-Bash">ipaddress:/NFSサーバのマウントパス /マウントディレクトリ               nfs     defaults        0 0</code></pre><p id="11a4ac48-17e6-4847-9de5-27bb5ba08952" class="">マウントポイントアクセス時にマントする場合には以下のようになります。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="133377cb-205a-4e34-8f9c-b960149499fa" class="code"><code class="language-Bash"># dnf -y install autofs
# vi /etc/auto.master
/-    /etc/auto.mount

# vi /etc/auto.mount
/マウントパス   -fstype=nfs,rw  ipaddress:/NFSサーバのマウントパス

# systemctl enable --now autofs
# cd /mnt
# dh -h
ipaddress:/NFSサーバのマウントパス   5.4T  1.2T  4.2T   23% /マウントディレクトリ</code></pre><h1 id="9756d062-66da-4d1e-a009-6f14d1a2ac8b" class="">13. 主要PKGのバージョンについて</h1><hr id="1289da9f-3730-800c-ac6e-d6d2c97418d5"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="47560e47-b883-4aa3-a9bb-f59540af6795" class="code"><code class="language-Bash">■OPENSSH
# rpm -qa | grep openssh
openssh-8.7p1-24.el9_1.x86_64
openssh-clients-8.7p1-24.el9_1.x86_64
openssh-server-8.7p1-24.el9_1.x86_64

■Apahce
# dnf list all | grep httpd
httpd.x86_64                                         2.4.53-7.el9                       rhel-9-for-x86_64-appstream-rpms 
httpd-core.x86_64                                    2.4.53-7.el9                       rhel-9-for-x86_64-appstream-rpms 
httpd-devel.x86_64                                   2.4.53-7.el9                       rhel-9-for-x86_64-appstream-rpms 
httpd-filesystem.noarch                              2.4.53-7.el9                       rhel-9-for-x86_64-appstream-rpms 
httpd-manual.noarch                                  2.4.53-7.el9                       rhel-9-for-x86_64-appstream-rpms 
httpd-tools.x86_64                                   2.4.53-7.el9                       rhel-9-for-x86_64-appstream-rpms 
keycloak-httpd-client-install.noarch                 1.1-10.el9                         rhel-9-for-x86_64-appstream-rpms 
libmicrohttpd.i686                                   1:0.9.72-4.el9                     rhel-9-for-x86_64-appstream-rpms 
libmicrohttpd.x86_64                                 1:0.9.72-4.el9                     rhel-9-for-x86_64-appstream-rpms 
python3-keycloak-httpd-client-install.noarch         1.1-10.el9                         rhel-9-for-x86_64-appstream-rpms 
redhat-logos-httpd.noarch                            90.4-1.el9                         rhel-9-for-x86_64-appstream-rpms

■PHP
# dnf list all | grep php
php.x86_64                                           8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-bcmath.x86_64                                    8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-cli.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-common.x86_64                                    8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-dba.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-dbg.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-devel.x86_64                                     8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-embedded.x86_64                                  8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-enchant.x86_64                                   8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-ffi.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-fpm.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-gd.x86_64                                        8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-gmp.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-intl.x86_64                                      8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-ldap.x86_64                                      8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-mbstring.x86_64                                  8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-mysqlnd.x86_64                                   8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-odbc.x86_64                                      8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-opcache.x86_64                                   8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-pdo.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-pear.noarch                                      1:1.10.13-1.el9                    rhel-9-for-x86_64-appstream-rpms 
php-pecl-apcu.x86_64                                 5.1.20-5.el9                       rhel-9-for-x86_64-appstream-rpms 
php-pecl-apcu-devel.x86_64                           5.1.20-5.el9                       rhel-9-for-x86_64-appstream-rpms 
php-pecl-rrd.x86_64                                  2.0.3-3.el9                        rhel-9-for-x86_64-appstream-rpms 
php-pecl-xdebug3.x86_64                              3.1.2-1.el9                        rhel-9-for-x86_64-appstream-rpms 
php-pecl-zip.x86_64                                  1.19.2-6.el9                       rhel-9-for-x86_64-appstream-rpms 
php-pgsql.x86_64                                     8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-process.x86_64                                   8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-snmp.x86_64                                      8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-soap.x86_64                                      8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms 
php-xml.x86_64                                       8.0.20-3.el9                       rhel-9-for-x86_64-appstream-rpms

■Mariadb
# dnf list all | grep mariadb
mariadb.x86_64                                       3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-backup.x86_64                                3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-common.x86_64                                3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-connector-c.i686                             3.2.6-1.el9_0                      rhel-9-for-x86_64-appstream-rpms 
mariadb-connector-c.x86_64                           3.2.6-1.el9_0                      rhel-9-for-x86_64-appstream-rpms 
mariadb-connector-c-config.noarch                    3.2.6-1.el9_0                      rhel-9-for-x86_64-appstream-rpms 
mariadb-connector-c-devel.i686                       3.2.6-1.el9_0                      rhel-9-for-x86_64-appstream-rpms 
mariadb-connector-c-devel.x86_64                     3.2.6-1.el9_0                      rhel-9-for-x86_64-appstream-rpms 
mariadb-connector-odbc.x86_64                        3.1.12-3.el9                       rhel-9-for-x86_64-appstream-rpms 
mariadb-embedded.x86_64                              3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-errmsg.x86_64                                3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-gssapi-server.x86_64                         3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-java-client.noarch                           3.0.3-1.el9                        rhel-9-for-x86_64-appstream-rpms 
mariadb-oqgraph-engine.x86_64                        3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-pam.x86_64                                   3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-server.x86_64                                3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-server-galera.x86_64                         3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms 
mariadb-server-utils.x86_64                          3:10.5.16-2.el9_0                  rhel-9-for-x86_64-appstream-rpms

■NFS
# dnf list all | grep nfs
libnfsidmap.i686                                     1:2.5.4-15.el9                     rhel-9-for-x86_64-baseos-rpms    
libnfsidmap.x86_64                                   1:2.5.4-15.el9                     rhel-9-for-x86_64-baseos-rpms    
libstoragemgmt-nfs-plugin.x86_64                     1.9.3-1.el9                        rhel-9-for-x86_64-appstream-rpms 
nfs-utils.x86_64                                     1:2.5.4-15.el9                     rhel-9-for-x86_64-baseos-rpms    
nfs-utils-coreos.x86_64                              1:2.5.4-15.el9                     rhel-9-for-x86_64-appstream-rpms 
nfs4-acl-tools.x86_64                                0.3.5-8.el9                        rhel-9-for-x86_64-baseos-rpms    
nfsv4-client-utils.x86_64                            1:2.5.4-15.el9                     rhel-9-for-x86_64-appstream-rpms 
pcp-pmda-nfsclient.x86_64                            5.3.7-7.el9                        rhel-9-for-x86_64-appstream-rpms 
sssd-nfs-idmap.x86_64                                2.7.3-4.el9_1.3                    rhel-9-for-x86_64-baseos-rpms    
texlive-mfnfss.noarch                                9:20200406-25.el9                  rhel-9-for-x86_64-appstream-rpms 
texlive-psnfss.noarch                                9:20200406-25.el9                  rhel-9-for-x86_64-appstream-rpms

■Python
# dnf list all | grep python3.x86_64
libcap-ng-python3.x86_64                             0.8.2-7.el9                        @rhel-9-for-x86_64-appstream-rpms
python3.x86_64                                       3.9.14-1.el9_1.1                   @rhel-9-for-x86_64-baseos-rpms   
boost-python3.x86_64                                 1.75.0-8.el9                       rhel-9-for-x86_64-appstream-rpms 
graphviz-python3.x86_64                              2.44.0-25.el9                      rhel-9-for-x86_64-appstream-rpms 
libpeas-loader-python3.x86_64                        1.30.0-4.el9                       rhel-9-for-x86_64-appstream-rpms 
openscap-python3.x86_64                              1:1.3.6-4.el9                      rhel-9-for-x86_64-appstream-rpms 
postgresql-plpython3.x86_64                          13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
systemtap-runtime-python3.x86_64                     4.7-2.el9                          rhel-9-for-x86_64-appstream-rpms

■Samba
# dnf list all | grep samba
ipa-client-samba.x86_64                              4.10.0-8.el9_1                     rhel-9-for-x86_64-appstream-rpms 
pcp-pmda-samba.x86_64                                5.3.7-7.el9                        rhel-9-for-x86_64-appstream-rpms 
python3-samba.i686                                   4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
python3-samba.x86_64                                 4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba.x86_64                                         4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-client.x86_64                                  4.16.4-101.el9                     rhel-9-for-x86_64-appstream-rpms 
samba-client-libs.i686                               4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-client-libs.x86_64                             4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-common.noarch                                  4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-common-libs.i686                               4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-common-libs.x86_64                             4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-common-tools.x86_64                            4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-krb5-printing.x86_64                           4.16.4-101.el9                     rhel-9-for-x86_64-appstream-rpms 
samba-libs.i686                                      4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-libs.x86_64                                    4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-vfs-iouring.x86_64                             4.16.4-101.el9                     rhel-9-for-x86_64-appstream-rpms 
samba-winbind.x86_64                                 4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-winbind-clients.x86_64                         4.16.4-101.el9                     rhel-9-for-x86_64-appstream-rpms 
samba-winbind-krb5-locator.x86_64                    4.16.4-101.el9                     rhel-9-for-x86_64-appstream-rpms 
samba-winbind-modules.i686                           4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-winbind-modules.x86_64                         4.16.4-101.el9                     rhel-9-for-x86_64-baseos-rpms    
samba-winexe.x86_64                                  4.16.4-101.el9                     rhel-9-for-x86_64-appstream-rpms

■Postfix
# dnf list all | grep postfix
pcp-pmda-postfix.x86_64                              5.3.7-7.el9                        rhel-9-for-x86_64-appstream-rpms 
postfix.x86_64                                       2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms 
postfix-cdb.x86_64                                   2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms 
postfix-ldap.x86_64                                  2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms 
postfix-mysql.x86_64                                 2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms 
postfix-pcre.x86_64                                  2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms 
postfix-perl-scripts.x86_64                          2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms 
postfix-pgsql.x86_64                                 2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms 
postfix-sqlite.x86_64                                2:3.5.9-19.el9                     rhel-9-for-x86_64-appstream-rpms

■Postgres
# dnf list all | grep postgres
pcp-pmda-postgresql.x86_64                           5.3.7-7.el9                        rhel-9-for-x86_64-appstream-rpms 
postgres-decoderbufs.x86_64                          1.4.0-4.Final.el9                  rhel-9-for-x86_64-appstream-rpms 
postgresql.x86_64                                    13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
postgresql-contrib.x86_64                            13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
postgresql-jdbc.noarch                               42.2.18-6.el9_1                    rhel-9-for-x86_64-appstream-rpms 
postgresql-odbc.x86_64                               12.02.0000-6.el9                   rhel-9-for-x86_64-appstream-rpms 
postgresql-plperl.x86_64                             13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
postgresql-plpython3.x86_64                          13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
postgresql-pltcl.x86_64                              13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
postgresql-private-libs.x86_64                       13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
postgresql-server.x86_64                             13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
postgresql-upgrade.x86_64                            13.7-1.el9_0                       rhel-9-for-x86_64-appstream-rpms 
qt5-qtbase-postgresql.i686                           5.15.3-1.el9                       rhel-9-for-x86_64-appstream-rpms 
qt5-qtbase-postgresql.x86_64                         5.15.3-1.el9                       rhel-9-for-x86_64-appstream-rpms 
tuned-profiles-postgresql.noarch                     2.19.0-1.el9                       rhel-9-for-x86_64-appstream-rpms</code></pre><h1 id="30eb3cc4-166f-42cb-a7c3-b68a86171906" class="">14. /var/log配下のログ運用</h1><hr id="1289da9f-3730-802e-b94d-c0855905a77e"/><p id="e69c0f0c-cb54-4e50-ae29-f4fec57f4176" class="">個人的には/var/log配下のログは当日日付のログのみとして、過去ログは別フォルダに移動したいです。</p><p id="f6e2398b-2c96-4450-bc9a-be294697aa84" class="">特に運用周りでrsyslog周りをしっかりしておきたいので修正をしていきます。</p><p id="0bc859fc-a84e-4cef-9a08-f597e4e1c4f1" class="">手始めに/etc/logrotate.d/rsyslogを無効化で全ての行にコメントアウトを挿入します。</p><p id="f5a31bd0-82b5-4b65-b5bd-dcc49a787678" class="">その上で/etc/cron.d配下にrsyslogファイルを以下のように作成します。</p><p id="d333109a-afea-4ab9-b7e1-97d4083b2351" class="">以下のようにすることで毎日過去ログはフォルダ毎に保管され、/var/log配下には当日のログファイルのみとなり管理がしやすくなります。</p><p id="349d1ba2-2c5e-4d9c-8b24-b35924c8db50" class="">以下ファイルを作成したら過去ログを保存するログフォルダの作成を忘れないようにして下さい。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="7a911dac-2995-4bfd-95d9-ec2a7566fcca" class="code"><code class="language-Bash">/var/log/messages #ローテートしたいファイルパス
/var/log/secure
/var/log/cron
/var/log/maillog
{
    daily #ローテーションする間隔
    rotate 365 #ログ保存の世代数
    compress #ローテーションしたログをgzipで圧縮
    ifempty #ログファイルが空でもローテーション
    missingok #ログファイルが存在しなくてもエラーを出さずに処理続行
    create 0644 root root #ローテーション後に空のログファイルを新規作成。ファイルのパーミッション、ユーザー名、グループ名を指定可能
    dateext #ローテートしたファイルに日付文字列を付ける
    sharedscripts #複数指定したログファイルに対し、postrotateまたはprerotateで記述したコマンドを実行
    postrotate
        /bin/kill -HUP `cat /var/run/rsyslogd.pid 2&gt; /dev/null` 2&gt; /dev/null || true
    endscript
    lastaction #postrotateスクリプトが実行された後に以下処理を実行
        /bin/mv /var/log/messages-`date &#x27;+%Y%m%d&#x27;`.gz /var/log/MESSAGES/messages-`date &#x27;+%Y%m%d&#x27; -d &#x27;1days ago&#x27;`.gz
        /bin/mv /var/log/secure-`date &#x27;+%Y%m%d&#x27;`.gz /var/log/SECURE/secure-`date &#x27;+%Y%m%d&#x27; -d &#x27;1days ago&#x27;`.gz
        /bin/mv /var/log/cron-`date &#x27;+%Y%m%d&#x27;`.gz /var/log/CRON/cron-`date &#x27;+%Y%m%d&#x27; -d &#x27;1days ago&#x27;`.gz
        /bin/mv /var/log/maillog-`date &#x27;+%Y%m%d&#x27;`.gz /var/log/MAIL/maillog-`date &#x27;+%Y%m%d&#x27; -d &#x27;1days ago&#x27;`.gz
        /bin/rm -f /var/log/MESSAGES/messages.`date &#x27;+%Y%m%d&#x27; -d &#x27;365days ago&#x27;`.gz
        /bin/rm -f /var/log/SECURE/secure.`date &#x27;+%Y%m%d&#x27; -d &#x27;365days ago&#x27;`.gz
        /bin/rm -f /var/log/CRON/cron.`date &#x27;+%Y%m%d&#x27; -d &#x27;365days ago&#x27;`.gz
        /bin/rm -f /var/log/MAIL/maillog.`date &#x27;+%Y%m%d&#x27; -d &#x27;365days ago&#x27;`.gz
 endscript
}</code></pre><p id="a915c42c-86c0-42a2-9409-725e2bfbf122" class="">ログローテートのテストを実施した後にログがローテートされていることを確認します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="559e5a68-d1a0-4e56-b98d-36cf427c5850" class="code"><code class="language-Bash"># logrotate -f /etc/cron.d/rsyslog
# ls -la /var/log/{MESSAGES,CRON,SECURE,MAIL}</code></pre><p id="5f6ab6ac-f5ee-4eec-bf45-83cb55e04bc7" class="">最後にCRONで処理が実行されるようにし、翌日ログファイルがローテートされていることを確認します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="7213ab0c-4371-4fcb-9d48-1a2df036cf51" class="code"><code class="language-Bash"># vi /etc/cron.d/rsyslog.cron
0 0 * * * root /usr/sbin/logrotate /etc/cron.d/rsyslog</code></pre><h3 id="1549da9f-3730-80ec-a165-e6824db7ad40" class="">上記までしなくてもいいけど、毎日ログローテートさせたい場合</h3><p id="1549da9f-3730-8064-894c-d2ef1ea81a74" class="">今まではCRONで動作していたログローテートですが、RHEL9からsystemd-timerサービスで管理されるようになっています。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1549da9f-3730-8029-bf5e-e1e4db195d12" class="code"><code class="language-JavaScript"># systemctl list-timers</code></pre><p id="1549da9f-3730-807e-bd81-dd9cb8e9e8ac" class="">を実行するとlogrotate.timerが一覧にあり、次回の実行時間が分かります。<br/>ログローテートのタイミングを修正したい場合には、以下を作成して設定を読み込みしおなします。<br/></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1549da9f-3730-8048-9cb2-ea290b80e559" class="code"><code class="language-JavaScript"># vi /etc/systemd/system/logrotate.timer.d/override.conf
※cron のような表記法 (OnCalendar=Mon --* 00:01:00 など) を使用できます。
※詳細は、man systemd.time で参照ください。
# systemctl daemon-reload</code></pre><p id="1549da9f-3730-809b-b3d8-cc36d625d373" class="">その後、/etc/logrotate.confの設定をweeklyからdailyに変更などを行うことで毎日ログローテートが実施されます。</p><h1 id="5f40a301-891f-4ecc-8b2d-bd1730cc1f9d" class="">15. boot.logの出力</h1><hr id="1289da9f-3730-807e-8d30-d11a872cba60"/><p id="cc8bfa3d-5454-4b77-a179-f4e9abb50b40" class="">boot.logがデフォルトで出力されないので、出力したい場合には以下PKGを追加してOS再起動を実施します。</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="8c1e7720-f3a2-4b62-9c95-49b80b135087" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all"># dnf install -y plymouth
# reboot</code></pre><p id="14f35ecc-23e6-4880-829f-4179f655c327" class="">OS再起動後に/var/log配下にboot.logが出力されていればOKです。</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>